(this["webpackJsonpcreate-react-app"]=this["webpackJsonpcreate-react-app"]||[]).push([[0],{107:function(e){e.exports=JSON.parse('{"version":8,"name":"Basic","metadata":{"mapbox:autocomposite":true},"sources":{"mapbox":{"url":"mapbox://mapbox.mapbox-streets-v8","type":"vector"}},"sprite":"mapbox://sprites/mapbox/basic-v8","glyphs":"mapbox://fonts/mapbox/{fontstack}/{range}.pbf","layers":[{"id":"background","type":"background","paint":{"background-color":"#dedede"},"interactive":true},{"id":"landuse_overlay_national_park","type":"fill","source":"mapbox","source-layer":"landuse_overlay","filter":["==","class","national_park"],"paint":{"fill-color":"#d2edae","fill-opacity":0.75},"interactive":true},{"id":"landuse_park","type":"fill","source":"mapbox","source-layer":"landuse","filter":["==","class","park"],"paint":{"fill-color":"#d2edae"},"interactive":true},{"id":"waterway","type":"line","source":"mapbox","source-layer":"waterway","filter":["all",["==","$type","LineString"],["in","class","river","canal"]],"paint":{"line-color":"#a0cfdf","line-width":{"base":1.4,"stops":[[8,0.5],[20,15]]}},"interactive":true},{"id":"water","type":"fill","source":"mapbox","source-layer":"water","paint":{"fill-color":"#a0cfdf"},"interactive":true},{"id":"building","type":"fill","source":"mapbox","source-layer":"building","paint":{"fill-color":"#d6d6d6"},"interactive":true},{"interactive":true,"layout":{"line-cap":"butt","line-join":"miter"},"filter":["all",["==","$type","LineString"],["all",["in","class","motorway_link","street","street_limited","service","track","pedestrian","path","link"],["==","structure","tunnel"]]],"type":"line","source":"mapbox","id":"tunnel_minor","paint":{"line-color":"#efefef","line-width":{"base":1.55,"stops":[[4,0.25],[20,30]]},"line-dasharray":[0.36,0.18]},"source-layer":"road"},{"interactive":true,"layout":{"line-cap":"butt","line-join":"miter"},"filter":["all",["==","$type","LineString"],["all",["in","class","motorway","primary","secondary","tertiary","trunk"],["==","structure","tunnel"]]],"type":"line","source":"mapbox","id":"tunnel_major","paint":{"line-color":"#fff","line-width":{"base":1.4,"stops":[[6,0.5],[20,30]]},"line-dasharray":[0.28,0.14]},"source-layer":"road"},{"interactive":true,"layout":{"line-cap":"round","line-join":"round"},"filter":["all",["==","$type","LineString"],["all",["in","class","motorway_link","street","street_limited","service","track","pedestrian","path","link"],["in","structure","none","ford"]]],"type":"line","source":"mapbox","id":"road_minor","paint":{"line-color":"#efefef","line-width":{"base":1.55,"stops":[[4,0.25],[20,30]]}},"source-layer":"road"},{"interactive":true,"layout":{"line-cap":"round","line-join":"round"},"filter":["all",["==","$type","LineString"],["all",["in","class","motorway","primary","secondary","tertiary","trunk"],["in","structure","none","ford"]]],"type":"line","source":"mapbox","id":"road_major","paint":{"line-color":"#fff","line-width":{"base":1.4,"stops":[[6,0.5],[20,30]]}},"source-layer":"road"},{"interactive":true,"layout":{"line-cap":"butt","line-join":"miter"},"filter":["all",["==","$type","LineString"],["all",["in","class","motorway_link","street","street_limited","service","track","pedestrian","path","link"],["==","structure","bridge"]]],"type":"line","source":"mapbox","id":"bridge_minor case","paint":{"line-color":"#dedede","line-width":{"base":1.6,"stops":[[12,0.5],[20,10]]},"line-gap-width":{"base":1.55,"stops":[[4,0.25],[20,30]]}},"source-layer":"road"},{"interactive":true,"layout":{"line-cap":"butt","line-join":"miter"},"filter":["all",["==","$type","LineString"],["all",["in","class","motorway","primary","secondary","tertiary","trunk"],["==","structure","bridge"]]],"type":"line","source":"mapbox","id":"bridge_major case","paint":{"line-color":"#dedede","line-width":{"base":1.6,"stops":[[12,0.5],[20,10]]},"line-gap-width":{"base":1.55,"stops":[[4,0.25],[20,30]]}},"source-layer":"road"},{"interactive":true,"layout":{"line-cap":"round","line-join":"round"},"filter":["all",["==","$type","LineString"],["all",["in","class","motorway_link","street","street_limited","service","track","pedestrian","path","link"],["==","structure","bridge"]]],"type":"line","source":"mapbox","id":"bridge_minor","paint":{"line-color":"#efefef","line-width":{"base":1.55,"stops":[[4,0.25],[20,30]]}},"source-layer":"road"},{"interactive":true,"layout":{"line-cap":"round","line-join":"round"},"filter":["all",["==","$type","LineString"],["all",["in","class","motorway","primary","secondary","tertiary","trunk"],["==","structure","bridge"]]],"type":"line","source":"mapbox","id":"bridge_major","paint":{"line-color":"#fff","line-width":{"base":1.4,"stops":[[6,0.5],[20,30]]}},"source-layer":"road"},{"interactive":true,"layout":{"line-cap":"round","line-join":"round"},"filter":["all",["==","$type","LineString"],["all",["<=","admin_level",2],["==","maritime",0]]],"type":"line","source":"mapbox","id":"admin_country","paint":{"line-color":"#8b8a8a","line-width":{"base":1.3,"stops":[[3,0.5],[22,15]]}},"source-layer":"admin"},{"interactive":true,"minzoom":5,"layout":{"icon-image":"{maki}-11","text-offset":[0,0.5],"text-field":"{name_en}","text-font":["Open Sans Semibold","Arial Unicode MS Bold"],"text-max-width":8,"text-anchor":"top","text-size":11,"icon-size":1},"filter":["all",["==","$type","Point"],["all",["==","scalerank",1],["==","localrank",1]]],"type":"symbol","source":"mapbox","id":"poi_label","paint":{"text-color":"#666","text-halo-width":1,"text-halo-color":"rgba(255,255,255,0.75)","text-halo-blur":1},"source-layer":"poi_label"},{"interactive":true,"layout":{"symbol-placement":"line","text-field":"{name_en}","text-font":["Open Sans Semibold","Arial Unicode MS Bold"],"text-transform":"uppercase","text-letter-spacing":0.1,"text-size":{"base":1.4,"stops":[[10,8],[20,14]]}},"filter":["all",["==","$type","LineString"],["in","class","motorway","primary","secondary","tertiary","trunk"]],"type":"symbol","source":"mapbox","id":"road_major_label","paint":{"text-color":"#666","text-halo-color":"rgba(255,255,255,0.75)","text-halo-width":2},"source-layer":"road_label"},{"interactive":true,"minzoom":8,"layout":{"text-field":"{name_en}","text-font":["Open Sans Semibold","Arial Unicode MS Bold"],"text-max-width":6,"text-size":{"stops":[[6,12],[12,16]]}},"filter":["all",["==","$type","Point"],["in","type","town","village","hamlet","suburb","neighbourhood","island"]],"type":"symbol","source":"mapbox","id":"place_label_other","paint":{"text-color":"#666","text-halo-color":"rgba(255,255,255,0.75)","text-halo-width":1,"text-halo-blur":1},"source-layer":"place_label"},{"interactive":true,"layout":{"text-field":"{name_en}","text-font":["Open Sans Bold","Arial Unicode MS Bold"],"text-max-width":10,"text-size":{"stops":[[3,12],[8,16]]}},"maxzoom":16,"filter":["all",["==","$type","Point"],["==","type","city"]],"type":"symbol","source":"mapbox","id":"place_label_city","paint":{"text-color":"#666","text-halo-color":"rgba(255,255,255,0.75)","text-halo-width":1,"text-halo-blur":1},"source-layer":"place_label"},{"interactive":true,"layout":{"text-field":"{name_en}","text-font":["Open Sans Regular","Arial Unicode MS Regular"],"text-max-width":10,"text-size":{"stops":[[3,14],[8,22]]}},"maxzoom":12,"filter":["==","$type","Point"],"type":"symbol","source":"mapbox","id":"country_label","paint":{"text-color":"#666","text-halo-color":"rgba(255,255,255,0.75)","text-halo-width":1,"text-halo-blur":1},"source-layer":"country_label"}]}')},126:function(e,t){},163:function(e,t,a){e.exports=a(175)},171:function(e,t){},175:function(e,t,a){"use strict";a.r(t);var r,n,i,o,s,c,l,u,p,d,m,y,b,h,f,g,v,w,S=a(3),O=a.n(S),E=a(141),j=a.n(E),k=a(32),L=a(127),_=a(22),D=a.n(_),C=a(39),A=a(45),x=a(34),R=a(35),T=a(26),N=(a(168),a(12)),P=a(44),M=a(43),I=new(function(e){Object(P.a)(a,e);var t=Object(M.a)(a);function a(){return Object(x.a)(this,a),t.apply(this,arguments)}return Object(R.a)(a,[{key:"getAssetsListAsync",value:function(){var e=Object(C.a)(D.a.mark((function e(t,a,r,n){var i,o,s;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,i={Viewport:t,Status:a,Search:r,Date:n,StagedLayers:[0,1,2],NetworkLayers:[100,105,110,900]},e.next=4,Promise.race([fetch("".concat(this.viewer3dURL),{method:"POST",headers:{"Access-Control-Allow-Origin":"*",Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(i)}),new Promise((function(e,t){return setTimeout((function(){return t(new Error("timeout"))}),3e4)}))]);case 4:return o=e.sent,e.next=7,o.json();case 7:return s=e.sent,e.abrupt("return",s);case 11:e.prev=11,e.t0=e.catch(0),console.log("Unable to fetch Assets"),console.log(e.t0);case 15:return e.abrupt("return",null);case 16:case"end":return e.stop()}}),e,this,[[0,11]])})));return function(t,a,r,n){return e.apply(this,arguments)}}()},{key:"getFeatureLayersList",value:function(){var e=Object(C.a)(D.a.mark((function e(t,a){var r,n,i;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r={CreatedBy:"WebGL",CreatedBySystem:"3D",EventType:"3D_GET_FEATURE_SERVERS_GIS",Message:{Viewport:t,IsStaged:a}},e.next=4,Promise.race([fetch("".concat(this.triggerURL),{method:"POST",headers:{"Access-Control-Allow-Origin":"*",Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(r)}),new Promise((function(e,t){return setTimeout((function(){return t(new Error("timeout"))}),2e4)}))]);case 4:return n=e.sent,e.next=7,n.json();case 7:return i=e.sent,e.abrupt("return",i);case 11:e.prev=11,e.t0=e.catch(0),console.log("Unable to fetch feature layers"),console.log(e.t0);case 15:return e.abrupt("return",null);case 16:case"end":return e.stop()}}),e,this,[[0,11]])})));return function(t,a){return e.apply(this,arguments)}}()},{key:"getFeatureLayer",value:function(){var e=Object(C.a)(D.a.mark((function e(t,a){var r,n,i;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("Get assets in layers from: ".concat(this.triggerURL)),e.prev=1,r={CreatedBy:"WebGL",CreatedBySystem:"3D",EventType:"3D_GET_ASSETS_IN_VIEWPORT_GIS",Message:{Viewport:t,layerId:a}},e.next=5,Promise.race([fetch("".concat(this.triggerURL),{method:"POST",headers:{"Access-Control-Allow-Origin":"*",Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(r)}),new Promise((function(e,t){return setTimeout((function(){return t(new Error("timeout"))}),2e4)}))]);case 5:return n=e.sent,e.next=8,n.json();case 8:return i=e.sent,e.abrupt("return",i);case 12:e.prev=12,e.t0=e.catch(1),console.log("Unable to fetch assets in layer "+a),console.log(e.t0);case 16:return e.abrupt("return",null);case 17:case"end":return e.stop()}}),e,this,[[1,12]])})));return function(t,a){return e.apply(this,arguments)}}()},{key:"getConnectivtyDataAsync",value:function(){var e=Object(C.a)(D.a.mark((function e(){var t,a,r,n,i=arguments;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=i.length>0&&void 0!==i[0]?i[0]:[[-88.18,41.75],[-88.18,41.8],[-88.14,41.8],[-88.14,41.75]],a={CreatedBy:"WebGL",CreatedBySystem:"3D",EventType:"3D_GET_ASSETS_IN_VIEWPORT_GIS",Message:{Viewport:t,MaxCount:-1,LayerId:903,IsStaged:!1}},e.prev=2,e.next=5,fetch("".concat(this.baseURLConnectivty),{method:"POST",headers:{"Access-Control-Allow-Origin":"*",Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(a)});case 5:return r=e.sent,e.next=8,r.json();case 8:return n=e.sent,e.abrupt("return",n);case 12:return e.prev=12,e.t0=e.catch(2),console.log(e.t0),e.abrupt("return",e.t0);case 16:case"end":return e.stop()}}),e,this,[[2,12]])})));return function(){return e.apply(this,arguments)}}()},{key:"getStagedConnectivtyDataAsync",value:function(){var e=Object(C.a)(D.a.mark((function e(){var t,a,r;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={CreatedBy:"WebGL",CreatedBySystem:"3D",EventType:"3D_GET_ASSETS_IN_VIEWPORT_GIS",Message:{Viewport:[[-90,40],[-90,43],[-87,43],[-87,40]],LayerId:1,IsStaged:!0}},e.prev=1,e.next=4,fetch("".concat(this.baseURLConnectivty),{method:"POST",headers:{"Access-Control-Allow-Origin":"*",Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(t)});case 4:return a=e.sent,e.next=7,a.json();case 7:return r=e.sent,e.abrupt("return",r);case 11:return e.prev=11,e.t0=e.catch(1),console.log(e.t0),e.abrupt("return",e.t0);case 15:case"end":return e.stop()}}),e,this,[[1,11]])})));return function(){return e.apply(this,arguments)}}()},{key:"getAssetsListAsyncStatic",value:function(){var e=Object(C.a)(D.a.mark((function e(){var t;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[{AssetId:"bee08b85-4e6f-41de-8549-340-24653",Description:"Substation",Equipement:"Substation",LineDescription:"93 - Orwigsburg",LineTag:"MN93",Tag:"EP432423200158",TR_LINE_REGION_DESC:"Susquehanna",Owner_Description:"Utility Owned",Type:"Substation",geometry:{X:-88.171993,Y:41.7826,Z:0,RotationX:0,RotationY:23,RotationZ:0,Scale:.025,ModelName:"SubControlHouse"}},{AssetId:"bee08b85-4e6f-41de-8549-23523",Description:"Substation Transformer #1",Equipement:"Substation Transformer #1",LineDescription:"93 - Orwigsburg",LineTag:"MN93",Tag:"EP432423200158",TR_LINE_REGION_DESC:"Susquehanna",Owner_Description:"Utility Owned",Type:"Transformer",geometry:{X:-76.245457,Y:40.777371,Z:0,RotationX:0,RotationY:0,RotationZ:0,Scale:8e-4,ModelName:"Power Transformer"}},{AssetId:"bee08b85-4e6f-41de-8549-435325",Description:"Substation Transformer #2",Equipement:"Substation Transformer #2",LineDescription:"93 - Orwigsburg",LineTag:"MN93",Tag:"EP432423200158",TR_LINE_REGION_DESC:"Susquehanna",Owner_Description:"Utility Owned",Type:"Transformer",geometry:{X:-76.245828,Y:40.777475,Z:0,RotationX:0,RotationY:0,RotationZ:0,Scale:8e-4,ModelName:"Power Transformer"}},{AssetId:"bee08b85-4e6f-41de-8549-345412",Description:"Substation Breaker #1",Equipement:"Substation Breaker #1",LineDescription:"93 - Orwigsburg",LineTag:"MN93",Tag:"EP432423200158",Type:"Breaker",TR_LINE_REGION_DESC:"Susquehanna",Owner_Description:"Utility Owned",geometry:{X:-76.245006,Y:40.777678,Z:0,RotationX:0,RotationY:0,RotationZ:0,Scale:.4,ModelName:"12KVCircuitBreaker"}},{AssetId:"bee08b85-4e6f-41de-8549-340-8936",Description:"Substation Breaker #2",Equipement:"Substation Breaker #2",LineDescription:"93 - Orwigsburg",LineTag:"MN93",Tag:"EP432423200158",Type:"Breaker",TR_LINE_REGION_DESC:"Susquehanna",Owner_Description:"Utility Owned",geometry:{X:-76.245366,Y:40.777743,Z:0,RotationX:0,RotationY:0,RotationZ:0,Scale:.4,ModelName:"12KVCircuitBreaker"}},{AssetId:"bee08b85-4e6f-41de-8549-340-24653",Description:"Substation Breaker #3",Equipement:"Substation Breaker #3",LineDescription:"93 - Orwigsburg",LineTag:"MN93",Tag:"EP432423200158",TR_LINE_REGION_DESC:"Susquehanna",Owner_Description:"Utility Owned",Type:"Breaker",geometry:{X:-76.245767,Y:40.777828,Z:0,RotationX:0,RotationY:0,RotationZ:0,Scale:.4,ModelName:"12KVCircuitBreaker"}},{AssetId:"bee08b85-4e6f-41de-8549-340-24652343",Description:"Substation",Equipement:"Substation",Type:"Substation",geometry:{X:-76.246198,Y:40.777523,Z:0,RotationX:0,RotationY:70,RotationZ:0,Scale:.03,ModelName:"SubControlHouse"}},{AssetId:"bee08b85-4e6f-41de-8549-340-24653",Description:"Transmission Pole #1",Equipement:"Transmission Pole #1",LineDescription:"93 - Orwigsburg",LineTag:"MN93",Tag:"EP432476S800158",Type:"Pole",TR_LINE_REGION_DESC:"Susquehanna",Owner_Description:"Utility Owned",geometry:{X:-76.249013,Y:40.7736,Z:0,RotationX:0,RotationY:0,RotationZ:0,Scale:1,ModelName:"EL_POLE"}},{AssetId:"bee08b85-4e6f-41de-8549-340-24653",Description:"Transmission Pole #2",Equipement:"Transmission Pole #2",LineDescription:"93 - Orwigsburg",LineTag:"MN93",Tag:"EP432476S2423158",Type:"Pole",TR_LINE_REGION_DESC:"Susquehanna",Owner_Description:"Utility Owned",geometry:{X:-76.24728,Y:40.774276,Z:0,RotationX:0,RotationY:0,RotationZ:0,Scale:1,ModelName:"EL_POLE"}},{AssetId:"bee08b85-4e6f-41de-8549-340-24653",Description:"Transmission Pole #3",Equipement:"Transmission Pole #3",LineDescription:"93 - Orwigsburg",LineTag:"MN93",Type:"Pole",TR_LINE_REGION_DESC:"Susquehanna",Owner_Description:"Utility Owned",Tag:"EP4324352800158",geometry:{X:-76.245391,Y:40.774698,Z:0,RotationX:0,RotationY:0,RotationZ:0,Scale:1,ModelName:"EL_POLE"}},{AssetId:"bee08b85-4e6f-41de-8549-340-24653",Description:"Transmission Pole #4",Equipement:"Transmission Pole #4",LineDescription:"93 - Orwigsburg",LineTag:"MN93",Tag:"EP432423200158",Type:"Pole",TR_LINE_REGION_DESC:"Susquehanna",Owner_Description:"Utility Owned",geometry:{X:-76.245477,Y:40.776226,Z:0,RotationX:0,RotationY:0,RotationZ:0,Scale:1,ModelName:"EL_POLE"}},{Status:"new",Equipement:"EL_FUSE",Type:null,Description:"",AssetId:"f77facd5-bf0a-4519-ba67-145d2bb7a915",geometry:{X:-88.16715464793565,Y:41.78365212448795,Z:8,Scale:.029999999329447746,RotationX:0,RotationY:0,RotationZ:0,AssetGroup:14,AssetType:221,LayerId:0,ModelName:"EL_FUSE"}},{Status:"Approved",Equipement:"High Voltage Transformer - AC Three Phase Power",Type:"High Voltage Transformer ",Description:"High Voltage Transformer - AC Three Phase Power",AssetId:"6dbeaafa-a1af-4ab5-b4a1-1dca99f14900",geometry:{X:-88.1717995563818,Y:41.782577501471536,Z:0,Scale:.0003000000142492354,RotationX:0,RotationY:90,RotationZ:0,AssetGroup:11,AssetType:202,LayerId:100,ModelName:"Power Transformer"}},{Status:"new",Equipement:"EL_SERVICE_POINT",Type:null,Description:"",AssetId:"c61c7b80-c8bf-4b0c-9dae-325cd81817c3",geometry:{X:-88.16697999837643,Y:41.78282212566463,Z:0,Scale:0,RotationX:0,RotationY:0,RotationZ:0,AssetGroup:36,AssetType:702,LayerId:0,ModelName:null}},{Status:"new",Equipement:"EL_RISER",Type:null,Description:"",AssetId:"763f5866-95ba-4efb-8277-54c0e235c51d",geometry:{X:-88.16715464793565,Y:41.78365212448795,Z:6,Scale:.019999999552965164,RotationX:0,RotationY:0,RotationZ:0,AssetGroup:9,AssetType:103,LayerId:0,ModelName:"EL_RISER"}},{Status:"new",Equipement:"EL_TRANSFORMER",Type:null,Description:"",AssetId:"150f2ada-a26a-4e87-8712-65411596bdae",geometry:{X:-88.16676397511016,Y:41.78303098650768,Z:0,Scale:.05000000074505806,RotationX:0,RotationY:0,RotationZ:0,AssetGroup:38,AssetType:335,LayerId:0,ModelName:"Pad Mounted Transformer"}},{Status:"Approved",Equipement:"High Voltage Switch - AC Disconnect",Type:"High Voltage Switch ",Description:"High Voltage Switch - AC Disconnect",AssetId:"55e74e25-5cde-42f7-91e6-6e0100f38790",geometry:{X:-88.17177188313349,Y:41.782467670496885,Z:0,Scale:.20000000298023224,RotationX:0,RotationY:0,RotationZ:0,AssetGroup:10,AssetType:182,LayerId:100,ModelName:"12KVCircuitBreaker"}},{Status:"new",Equipement:"EL_POLE",Type:null,Description:"",AssetId:"4a1a6090-2925-4da0-a088-7dbda8527ed7",geometry:{X:-88.16723637306694,Y:41.78409623642401,Z:0,Scale:1,RotationX:0,RotationY:0,RotationZ:0,AssetGroup:121,AssetType:324,LayerId:0,ModelName:"EL_POLE"}},{Status:"new",Equipement:"EL_PAD",Type:null,Description:"",AssetId:"fde09737-47c2-4e1b-b871-82d56d841d32",geometry:{X:-88.16676397511016,Y:41.78303098650768,Z:0,Scale:.05000000074505806,RotationX:0,RotationY:0,RotationZ:0,AssetGroup:106,AssetType:201,LayerId:0,ModelName:"Default PAD"}},{Status:"Approved",Equipement:"High Voltage Switch - AC Circuit Breaker",Type:"High Voltage Switch ",Description:"High Voltage Switch - AC Circuit Breaker",AssetId:"03f5f2c4-9d87-4300-b52d-876f6721b2b5",geometry:{X:-88.1717841096892,Y:41.782484937744336,Z:0,Scale:.20000000298023224,RotationX:0,RotationY:0,RotationZ:0,AssetGroup:10,AssetType:181,LayerId:100,ModelName:"12KVCircuitBreaker"}},{Status:"Approved",Equipement:"High Voltage Transformer - AC Three Phase Power",Type:"High Voltage Transformer ",Description:"High Voltage Transformer - AC Three Phase Power",AssetId:"d41ef658-588a-4eee-b360-9f94f1fda1ed",geometry:{X:-88.17186589068018,Y:41.78255410424948,Z:0,Scale:.0003000000142492354,RotationX:0,RotationY:90,RotationZ:0,AssetGroup:11,AssetType:202,LayerId:100,ModelName:"Power Transformer"}},{Status:"new",Equipement:"EL_SERVICE_POINT",Type:null,Description:"",AssetId:"c2e49170-e2ff-4099-be16-b60f7148a9ab",geometry:{X:-88.16762976239784,Y:41.78263698635166,Z:0,Scale:0,RotationX:0,RotationY:0,RotationZ:0,AssetGroup:36,AssetType:702,LayerId:0,ModelName:null}},{Status:"Approved",Equipement:"High Voltage Switch - AC Circuit Breaker",Type:"High Voltage Switch ",Description:"High Voltage Switch - AC Circuit Breaker",AssetId:"ff1f655d-3a75-4a4c-a8d6-bf4fd64b1c71",geometry:{X:-88.17179426342898,Y:41.782569851748555,Z:0,Scale:.20000000298023224,RotationX:0,RotationY:0,RotationZ:0,AssetGroup:10,AssetType:181,LayerId:100,ModelName:"12KVCircuitBreaker"}},{Status:"new",Equipement:"EL_POLE",Type:null,Description:"",AssetId:"86dce38e-def4-4b5f-bf77-c9a20542f8bd",geometry:{X:-88.16846354361029,Y:41.78373360953357,Z:0,Scale:1,RotationX:0,RotationY:0,RotationZ:0,AssetGroup:121,AssetType:324,LayerId:0,ModelName:"EL_POLE"}},{Status:"new",Equipement:"EL_POLE",Type:null,Description:"",AssetId:"e54bddce-b53c-4fb5-95f9-da35befb46bd",geometry:{X:-88.16783115929465,Y:41.78391394560283,Z:0,Scale:1,RotationX:0,RotationY:0,RotationZ:0,AssetGroup:121,AssetType:324,LayerId:0,ModelName:"EL_POLE"}},{Status:"new",Equipement:"EL_POLE",Type:null,Description:"",AssetId:"45c25c08-a4bb-4794-8c72-e61a08e2bfa5",geometry:{X:-88.16715464793565,Y:41.78365212448795,Z:0,Scale:1,RotationX:0,RotationY:0,RotationZ:0,AssetGroup:121,AssetType:324,LayerId:0,ModelName:"EL_POLE"}},{Status:"Approved",Equipement:"High Voltage Switch - AC Circuit Breaker",Type:"High Voltage Switch ",Description:"High Voltage Switch - AC Circuit Breaker",AssetId:"6e2833bd-6196-4743-9a70-efeb3036515c",geometry:{X:-88.17186305338019,Y:41.782545786310095,Z:0,Scale:.20000000298023224,RotationX:0,RotationY:0,RotationZ:0,AssetGroup:10,AssetType:181,LayerId:100,ModelName:"12KVCircuitBreaker"}}],e.abrupt("return",t);case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}]),a}(function(){function e(){Object(x.a)(this,e),this._3dViewerUrl="",this._baseURL="",this._gisAssetsUrl="",this._triggerURL="",this._baseURLConnectivty="",this._modelFilesURL=""}return Object(R.a)(e,[{key:"viewer3dURL",get:function(){return this._3dViewerUrl}},{key:"baseURL",get:function(){return this._baseURL}},{key:"assetsGISURL",get:function(){return this._gisAssetsUrl}},{key:"baseURLConnectivty",get:function(){return this._baseURLConnectivty}},{key:"triggerURL",get:function(){return this._triggerURL}},{key:"modelFileURL",get:function(){return this._modelFilesURL}}]),e}())),V=a(90),Y=a(107),X=a(36),Z=(r=function(){function e(){Object(x.a)(this,e),Object(A.a)(this,"modelViewerState",n,this),Object(A.a)(this,"useStaticAssets",i,this),Object(A.a)(this,"useDynamicAssets",o,this),Object(A.a)(this,"errorState",s,this),Object(A.a)(this,"assets",c,this),Object(A.a)(this,"assetsLoadingState",l,this),Object(A.a)(this,"dataPanelContent",u,this),Object(A.a)(this,"mapStyle",p,this),Object(A.a)(this,"connectivityData",d,this),Object(A.a)(this,"subNetConectivity",m,this),Object(A.a)(this,"stagedConnectivityData",y,this),Object(A.a)(this,"electricDevicesLayer",b,this),Object(A.a)(this,"dateFilter",h,this),Object(A.a)(this,"statusFilter",f,this),Object(A.a)(this,"textFilter",g,this),Object(A.a)(this,"viewportCoordinates",v,this),Object(A.a)(this,"mapViewPort",w,this)}return Object(R.a)(e,[{key:"initiateMap",value:function(){this.mapViewPort={width:"fit",height:"100vh",latitude:41.7833,longitude:-88.1678,zoom:17.8,pitch:0,bearing:0},this.getModelList(),this.getConnectivityLayer(this.viewportCoordinates)}},{key:"refreshFilters",value:function(){this.dataPanelContent="Please select a model to view data",this.statusFilter="All",this.dateFilter=(new Date).getFullYear()+"-"+((new Date).getMonth()+1)+"-"+((new Date).getDate()+1),this.textFilter=""}},{key:"toggleStreetViewMode",value:function(){if(0===this.mapViewPort.pitch){var e={width:"fit",height:"100vh",longitude:this.mapViewPort.longitude,latitude:this.mapViewPort.latitude,zoom:this.mapViewPort.zoom,transitionInterpolator:new V.b(["pitch"]),transitionDuration:1e3,pitch:60,bearing:this.mapViewPort.bearing};this.mapViewPort=e}else{var t={width:"fit",height:"100vh",longitude:this.mapViewPort.longitude,latitude:this.mapViewPort.latitude,zoom:this.mapViewPort.zoom,transitionInterpolator:new V.b(["pitch"]),transitionDuration:1e3,pitch:0,bearing:this.mapViewPort.bearing};this.mapViewPort=t}}},{key:"setDataPanelModel",value:function(e){this.dataPanelContent=e}},{key:"updateSearchDate",value:function(e){this.dateFilter=e.getFullYear()+"-"+(e.getMonth()+1)+"-"+e.getDate()}},{key:"updateSearchStatus",value:function(e){this.statusFilter=e}},{key:"updateSearchText",value:function(e){this.textFilter=e}},{key:"updateMapViewport",value:function(e){this.mapViewPort=e;var t=new X.a(e),a=[];a.push(t.unproject([0,t.height]),t.unproject([0,0]),t.unproject([t.width,0]),t.unproject([t.width,t.height])),this.viewportCoordinates=a}},{key:"getModelList",value:function(){var e=Object(C.a)(D.a.mark((function e(){var t,a,r;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=[],this.assets=[],this.assetsLoadingState=!0,e.prev=3,!this.useDynamicAssets){e.next=9;break}return e.next=7,I.getAssetsListAsync(this.viewportCoordinates,this.statusFilter,this.textFilter,this.dateFilter);case 7:null!=(a=e.sent)&&a!=[]&&(t=t.concat(a));case 9:if(!this.useStaticAssets){e.next=14;break}return e.next=12,I.getAssetsListAsyncStatic();case 12:r=e.sent,t=t.concat(r);case 14:this.assets=t.filter((function(e){return"geometry"in e})),this.assetsLoadingState=!1,e.next=22;break;case 18:e.prev=18,e.t0=e.catch(3),this.assetsLoadingState=!1,this.errorState=!0;case 22:this.refreshFilters();case 23:case"end":return e.stop()}}),e,this,[[3,18]])})));return function(){return e.apply(this,arguments)}}()},{key:"refeshConnectivityLayer",value:function(){var e=Object(C.a)(D.a.mark((function e(){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.getConnectivityLayer(this.viewportCoordinates);case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getConnectivityLayer",value:function(){var e=Object(C.a)(D.a.mark((function e(t){var a,r,n=this;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,I.getConnectivtyDataAsync(t);case 2:return a=e.sent,e.next=5,I.getStagedConnectivtyDataAsync();case 5:r=e.sent,Object(N.n)((function(){n.formatConnectivityData(a),n.formatStagedConnectivityData(r)}));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"formatConnectivityData",value:function(){var e=Object(C.a)(D.a.mark((function e(t){var a,r,n=this;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=[],r=[],Object.entries(t).map((function(e){switch(e[0]){case"100":e[1].features.map((function(e){var t=[e.geometry.x,e.geometry.y];r.push([t])})),n.electricDevicesLayer=r||null;break;case"105":case"110":case"115":break;case"903":case"120":e[1].features.map((function(e){e.geometry.paths.map((function(e){var t=e.reduce((function(e,t){return[].concat(Object(L.a)(e),[[t[0],t[1],8.6]])}),[]);a.push([t])}))})),n.subNetConectivity=a||null}}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"formatStagedConnectivityData",value:function(){var e=Object(C.a)(D.a.mark((function e(t){var a,r=this;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=[],Object.entries(t).map((function(e){switch(e[0]){case"0":break;case"1":e[1].features.map((function(e){e.geometry.paths.map((function(e){var t=e.reduce((function(e,t){return[].concat(Object(L.a)(e),[[t[0],t[1],8.6]])}),[]);a.push([t])}))})),r.stagedConnectivityData=a||null}}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"setSelectedModel",value:function(){var e=Object(C.a)(D.a.mark((function e(t){var a;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a={width:"fit",height:"100vh",longitude:t.geometry.X,latitude:t.geometry.Y,zoom:18,transitionInterpolator:new V.a({speed:3}),transitionDuration:"auto",pitch:0,bearing:0},this.mapViewPort=a,this.setDataPanelModel(t);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"setMapStyle",value:function(){var e=Object(C.a)(D.a.mark((function e(t){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.mapStyle=t;case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"setConnectivityModel",value:function(){var e=Object(C.a)(D.a.mark((function e(t){var a;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=[],t.filter((function(e){return null!=e.from_id&&null!=e.to_id&&!0===e.is_connected})).map((function(e){var r={from:{coordinates:[t.find((function(t){return t.id===e.from_id})).longitude,t.find((function(t){return t.id===e.from_id})).latitude]},to:{coordinates:[t.find((function(t){return t.id===e.id})).longitude,t.find((function(t){return t.id===e.id})).latitude]}},n={from:{coordinates:[t.find((function(t){return t.id===e.id})).longitude,t.find((function(t){return t.id===e.id})).latitude]},to:{coordinates:[t.find((function(t){return t.id===e.to_id})).longitude,t.find((function(t){return t.id===e.to_id})).latitude]}};a.push(n),a.push(r)})),this.connectivityData=a;case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}(),n=Object(T.a)(r.prototype,"modelViewerState",[N.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),i=Object(T.a)(r.prototype,"useStaticAssets",[N.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),o=Object(T.a)(r.prototype,"useDynamicAssets",[N.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),s=Object(T.a)(r.prototype,"errorState",[N.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),c=Object(T.a)(r.prototype,"assets",[N.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),l=Object(T.a)(r.prototype,"assetsLoadingState",[N.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),u=Object(T.a)(r.prototype,"dataPanelContent",[N.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"Please select a model to view data"}}),p=Object(T.a)(r.prototype,"mapStyle",[N.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return Y}}),d=Object(T.a)(r.prototype,"connectivityData",[N.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),m=Object(T.a)(r.prototype,"subNetConectivity",[N.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),y=Object(T.a)(r.prototype,"stagedConnectivityData",[N.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),b=Object(T.a)(r.prototype,"electricDevicesLayer",[N.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),h=Object(T.a)(r.prototype,"dateFilter",[N.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return(new Date).getFullYear()+"-"+((new Date).getMonth()+1)+"-"+((new Date).getDate()+1)}}),f=Object(T.a)(r.prototype,"statusFilter",[N.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"All"}}),g=Object(T.a)(r.prototype,"textFilter",[N.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),v=Object(T.a)(r.prototype,"viewportCoordinates",[N.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[[-88.17231208338957,41.78164438640926],[-88.17231208338957,41.784532458674306],[-88.16407233729582,41.784532458674306],[-88.16407233729582,41.78164438640926]]}}),w=Object(T.a)(r.prototype,"mapViewPort",[N.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{width:"fit",height:"100vh",latitude:0,longitude:0,zoom:2,pitch:0,bearing:0}}}),Object(T.a)(r.prototype,"initiateMap",[N.f],Object.getOwnPropertyDescriptor(r.prototype,"initiateMap"),r.prototype),Object(T.a)(r.prototype,"refreshFilters",[N.f],Object.getOwnPropertyDescriptor(r.prototype,"refreshFilters"),r.prototype),Object(T.a)(r.prototype,"toggleStreetViewMode",[N.f],Object.getOwnPropertyDescriptor(r.prototype,"toggleStreetViewMode"),r.prototype),Object(T.a)(r.prototype,"setDataPanelModel",[N.f],Object.getOwnPropertyDescriptor(r.prototype,"setDataPanelModel"),r.prototype),Object(T.a)(r.prototype,"updateSearchDate",[N.f],Object.getOwnPropertyDescriptor(r.prototype,"updateSearchDate"),r.prototype),Object(T.a)(r.prototype,"updateSearchStatus",[N.f],Object.getOwnPropertyDescriptor(r.prototype,"updateSearchStatus"),r.prototype),Object(T.a)(r.prototype,"updateSearchText",[N.f],Object.getOwnPropertyDescriptor(r.prototype,"updateSearchText"),r.prototype),Object(T.a)(r.prototype,"updateMapViewport",[N.f],Object.getOwnPropertyDescriptor(r.prototype,"updateMapViewport"),r.prototype),Object(T.a)(r.prototype,"getModelList",[N.f],Object.getOwnPropertyDescriptor(r.prototype,"getModelList"),r.prototype),Object(T.a)(r.prototype,"refeshConnectivityLayer",[N.f],Object.getOwnPropertyDescriptor(r.prototype,"refeshConnectivityLayer"),r.prototype),Object(T.a)(r.prototype,"getConnectivityLayer",[N.f],Object.getOwnPropertyDescriptor(r.prototype,"getConnectivityLayer"),r.prototype),Object(T.a)(r.prototype,"formatConnectivityData",[N.f],Object.getOwnPropertyDescriptor(r.prototype,"formatConnectivityData"),r.prototype),Object(T.a)(r.prototype,"formatStagedConnectivityData",[N.f],Object.getOwnPropertyDescriptor(r.prototype,"formatStagedConnectivityData"),r.prototype),Object(T.a)(r.prototype,"setSelectedModel",[N.f],Object.getOwnPropertyDescriptor(r.prototype,"setSelectedModel"),r.prototype),Object(T.a)(r.prototype,"setMapStyle",[N.f],Object.getOwnPropertyDescriptor(r.prototype,"setMapStyle"),r.prototype),Object(T.a)(r.prototype,"setConnectivityModel",[N.f],Object.getOwnPropertyDescriptor(r.prototype,"setConnectivityModel"),r.prototype),r),q={zIndex:"99999",position:"absolute",top:"50%",left:"50%"},U=function(e){Object(P.a)(a,e);var t=Object(M.a)(a);function a(){return Object(x.a)(this,a),t.apply(this,arguments)}return Object(R.a)(a,[{key:"render",value:function(){return O.a.createElement("div",{style:q,className:"preloader-wrapper big active"},O.a.createElement("div",{className:"spinner-layer spinner-blue"},O.a.createElement("div",{className:"circle-clipper left"},O.a.createElement("div",{className:"circle"})),O.a.createElement("div",{className:"gap-patch"},O.a.createElement("div",{className:"circle"})),O.a.createElement("div",{className:"circle-clipper right"},O.a.createElement("div",{className:"circle"}))))}}]),a}(O.a.Component),G={zIndex:"99999",position:"absolute",top:"50%"},z=function(e){Object(P.a)(a,e);var t=Object(M.a)(a);function a(){return Object(x.a)(this,a),t.apply(this,arguments)}return Object(R.a)(a,[{key:"render",value:function(){return O.a.createElement("div",{style:G,className:"center"},O.a.createElement("h6",null,"API Error. Backend not reachable"))}}]),a}(O.a.Component),B=function(e){Object(P.a)(a,e);var t=Object(M.a)(a);function a(){var e;Object(x.a)(this,a);for(var r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];return(e=t.call.apply(t,[this].concat(n))).modelViewCallback=function(){e.props.store.setSelectedModel(e.props.model)},e}return Object(R.a)(a,[{key:"render",value:function(){return O.a.createElement("div",{className:"menu-card",key:"".concat(this.props.i,"-").concat(this.props.model.Equipement)},O.a.createElement("div",{className:"white darken-1"},O.a.createElement("div",{className:"row valign-wrapper"},O.a.createElement("div",{className:"col l10 s10 m10"},O.a.createElement("div",{className:"left-align"},O.a.createElement("p",{className:"black-text left-align"},this.props.model.Equipement))),O.a.createElement("div",{className:"col l2 s2 m2"},O.a.createElement("button",{style:{border:"none",backgroundColor:"transparent"},className:"blue-text",onClick:this.modelViewCallback.bind(this)},O.a.createElement("i",{className:"material-icons blue-text"},"call_made"))))))}}]),a}(S.Component),F=Object(k.b)("store")(Object(k.c)(B)),H=a(59),$=a.n(H),J=function(e){Object(P.a)(a,e);var t=Object(M.a)(a);function a(){var e;Object(x.a)(this,a);for(var r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];return(e=t.call.apply(t,[this].concat(n))).updateInputValue=function(t){e.props.store.updateSearchText(t.target.value)},e.modelListView=function(){if(e.props.store.assets!==[])return O.a.createElement("div",{className:"assets-list-view"},e.props.store.assets.map((function(e,t){return O.a.createElement(F,{model:e,keyValue:t,key:"".concat(e.Equipement,"-").concat(t)})})))},e.loadingState=function(){return O.a.createElement(U,null)},e.updateStatus=function(t){e.props.store.updateSearchStatus(t.target[t.target.value].text.substring(8))},e.searchAsset=function(){e.props.store.mapViewPort.zoom<12&&$.a.toast({html:"Please zoom in more to load assets",displayLength:2e3,classes:"rounded"}),e.props.store.getModelList(),e.props.store.refeshConnectivityLayer()},e.withDataState=function(){return O.a.createElement("div",{className:"modelsView"},O.a.createElement("div",{className:"black menu-header center center-align valign-wrapper "},O.a.createElement("h4",{className:"white-text"},"EPNG AM POC")),O.a.createElement("div",{className:"white"},O.a.createElement("div",{className:"row padding-5px search-container"},O.a.createElement("div",{className:"card valign-wrapper search-box"},O.a.createElement("div",{className:"input-field col l9 s9 m9"},O.a.createElement("input",{className:"black-text",id:"model_filter",placeholder:"Search Asset",type:"text",onChange:e.updateInputValue})),O.a.createElement("div",{className:"col l3 s3 m3"},O.a.createElement("button",{style:{border:"none",backgroundColor:"transparent"},onClick:e.searchAsset},O.a.createElement("i",{className:"material-icons black-text"},"search"))))),O.a.createElement("div",{className:"left-align search-filters-list"},O.a.createElement("div",{className:"input-field chip light-blue darken-3 white-text filter-chip"},O.a.createElement("div",{className:"filter-chip-content "},O.a.createElement("select",{id:"status_selector",onChange:e.updateStatus},O.a.createElement("option",{defaultValue:!0,value:"0"},"Status: All"),O.a.createElement("option",{value:"1"},"Status: New"),O.a.createElement("option",{value:"2"},"Status: Approved")))),O.a.createElement("div",{className:"chip input-field light-blue darken-3 white-text filter-chip"},O.a.createElement("div",{className:"filter-chip-content"},O.a.createElement("input",{id:"date",type:"text",className:"datepicker white-text"}))))),e.modelListView())},e}return Object(R.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=new Date,a=new Date(t);a.setDate(a.getDate()+1);var r=document.querySelectorAll(".datepicker");$.a.Datepicker.init(r,{format:"yyyy-mm-dd",defaultDate:a,setDefaultDate:!0,container:"body",autoClose:!0,selectMonths:!0,selectYears:200,onSelect:function(t){e.props.store.updateSearchDate(t)}});var n=document.querySelectorAll("select");$.a.FormSelect.init(n)}},{key:"render",value:function(){return!1===this.props.store.assetsLoadingState?this.withDataState(this.props.store):this.loadingState()}}]),a}(S.Component),W=Object(k.b)("store")(Object(k.c)(J)),K=Object(k.b)("store")(Object(k.c)((function(e){var t=[],a="ascending";!function e(a,r){if("string"==typeof a)null!==a&&""!==a&&(null==r?t.push(a):t.push(r+": \n"+a));else for(var n in a){var i=void 0;i=null!==r?r+"."+n:n,e(a[n],i)}}(e.store.dataPanelContent,null);var r=t.sort((function(e,t){return function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:a,n=e.toLowerCase().localeCompare(t.toLowerCase());return r===a?n:-1*n}(e,t,a)})).map((function(e,t){return O.a.createElement("p",{key:"".concat(e,"-").concat(t)},e)}));return O.a.createElement("div",{className:"data-view-card dataOverLay "},O.a.createElement("div",{className:"data-view-container"},O.a.createElement("div",{className:"row "},O.a.createElement("div",{className:"col l12 s12"},O.a.createElement("h5",null,"Asset Data"),r,null==e.store.dataPanelContent.AssetId?O.a.createElement("p",null):O.a.createElement("button",{className:"center waves-effect waves-light btn"},"View")))))}))),Q=a(198),ee=a(144),te=a(199),ae=a(195),re=a(18),ne=a(151),ie=a(145),oe=a(190),se=a(128),ce=a(200),le=a(193),ue=a(97),pe=a(73),de=a(143),me=Object(de.a)(Y),ye=["labels","roads","buildings","parks","water","background","connectivity","models"],be={background:/background/,water:/water/,parks:/park/,buildings:/building/,roads:/bridge|road|tunnel/,labels:/label|place|poi/,connectivity:/trips-layer/,models:/model-layer/},he={line:"line-color",fill:"fill-color",background:"background-color",symbol:"text-color"},fe=function(e){Object(P.a)(a,e);var t=Object(M.a)(a);function a(e){var r;return Object(x.a)(this,a),(r=t.call(this,e))._defaultLayers=me.get("layers"),r.state={visibility:{water:!0,parks:!0,buildings:!0,roads:!0,labels:!0,background:!0,connectivity:!1,models:!0},color:{water:"#DBE2E6",parks:"#E6EAE9",buildings:"#c0c0c8",roads:"#ffffff",labels:"#78888a",background:"#EBF0F0"}},r}return Object(R.a)(a,[{key:"componentDidMount",value:function(){this._updateMapStyle(this.state),$.a.Modal.init(document.querySelectorAll(".modal")),$.a.Tooltip.init(document.querySelectorAll(".tooltipped"))}},{key:"_onColorChange",value:function(e,t){var a=Object(pe.a)(Object(pe.a)({},this.state.color),{},Object(ue.a)({},e,t.target.value));this.setState({color:a}),this._updateMapStyle(Object(pe.a)(Object(pe.a)({},this.state),{},{color:a}))}},{key:"_onVisibilityChange",value:function(e,t){var a=Object(pe.a)(Object(pe.a)({},this.state.visibility),{},Object(ue.a)({},e,t.target.checked));this.setState({visibility:a}),this._updateMapStyle(Object(pe.a)(Object(pe.a)({},this.state),{},{visibility:a})),this.props.toggleParent(e,t.target.checked)}},{key:"_updateMapStyle",value:function(e){var t=e.visibility,a=e.color,r=this._defaultLayers.filter((function(e){var a=e.get("id");return ye.every((function(e){return t[e]||!be[e].test(a)}))})).map((function(e){var t=e.get("id"),r=e.get("type"),n=ye.find((function(e){return be[e].test(t)}));return n&&he[r]?e.setIn(["paint",he[r]],a[n]):e}));this.props.setMapStyle(me.set("layers",r))}},{key:"_renderLayerControl",value:function(e){var t=this.state,a=t.visibility,r=t.color;return O.a.createElement("div",{key:e},O.a.createElement("label",{className:"input ",width:"200%"},O.a.createElement("div",{className:"row"},O.a.createElement("input",{className:"col s2 m2 l2",type:"checkbox",checked:a[e],onChange:this._onVisibilityChange.bind(this,e)}),O.a.createElement("span",{className:"col s7 m7 l4 center-aligned center offset-m1 offset-l3 offset-s1"},e),"connectivity"===e||"models"===e?null:O.a.createElement("input",{className:"col s2 m2 l1",type:"color",value:r[e],disabled:!a[e],onChange:this._onColorChange.bind(this,e)}))))}},{key:"render",value:function(){var e=this;return O.a.createElement("div",null,O.a.createElement("div",{id:"modal1",className:"modal"},O.a.createElement("div",{className:"layers-modal-header black"},O.a.createElement("h4",{className:"white-text center-align"},"Edit Layers")),O.a.createElement("div",{className:"modal-content container center-align"},O.a.createElement("div",null,ye.map((function(t){return e._renderLayerControl(t)}))))))}}]),a}(S.PureComponent),ge=Object(k.b)("store")(Object(k.c)(fe)),ve=function(e){return O.a.createElement("div",{className:"refresh-button"},O.a.createElement("button",{onClick:e.refreshClick,"data-position":"left","data-tooltip":"Search this location",className:"btn-floating  tooltipped  btn-large waves-effect waves-dark white "},O.a.createElement("i",{className:"material-icons  black-text"},"refresh")))},we=function(e){return O.a.createElement("a",{"data-position":"left","data-tooltip":"Edit Layers",className:" btn-floating btn-large tooltipped  waves-effect waves-dark white  modal-trigger layers-button",href:"#modal1"},O.a.createElement("i",{className:"material-icons  black-text"},"menu"))},Se=Object(k.b)("store")(Object(k.c)((function(e){return O.a.createElement("button",{"data-position":"left","data-tooltip":"Change to "+(0===e.store.mapViewPort.pitch?"3D":"2D")+" mode",className:" btn-floating black-text btn-large tooltipped  waves-effect waves-dark white  street-view-button",onClick:e.toggleStreetView},0===e.store.mapViewPort.pitch?"3D":"2D")})));Object(ee.b)([Q.a]);var Oe=function(e){Object(P.a)(a,e);var t=Object(M.a)(a);function a(){var e;Object(x.a)(this,a);for(var r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];return(e=t.call.apply(t,[this].concat(n))).state={model:e.props.model,mapStyle:"",modelLayersList:[],connectivityLayersList:[],showConnectivity:!1,showModels:!0,time:0},e.refreshAssets=Object(C.a)(D.a.mark((function t(){return D.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.props.store.mapViewPort.zoom<12&&$.a.toast({html:"Please zoom in more to load assets",displayLength:2e3,classes:"rounded"}),e.props.store.getModelList(),e.props.store.refeshConnectivityLayer();case 3:case"end":return t.stop()}}),t)}))),e.toggleStreetView=Object(C.a)(D.a.mark((function t(){return D.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.props.store.toggleStreetViewMode();case 1:case"end":return t.stop()}}),t)}))),e._onStyleChange=function(t){return e.setState({mapStyle:t})},e.layerCheck=function(t,a){"models"===t?e.setState({showModels:a}):"connectivity"===t&&e.setState({showConnectivity:a})},e}return Object(R.a)(a,[{key:"_renderEffects",value:function(){var e=[],t=new ie.a({color:[255,255,255],intensity:1});return e.push(t),""!=this.props.store.assets.toString()&&this.props.store.assets!=[]&&this.props.store.assets.map((function(t){try{if(t){var a=new oe.a({color:[255,255,255],intensity:2,position:[t.geometry.X,t.geometry.Y,400]});e.push(a);var r=new oe.a({color:[255,255,255],intensity:2,position:[t.geometry.X-20,t.geometry.Y-20,400]});e.push(r);var n=new oe.a({color:[255,255,255],intensity:2,position:[t.geometry.X+20,t.geometry.Y+20,400]});e.push(n);var i=new oe.a({color:[255,255,255],intensity:2,position:[t.geometry.X+20,t.geometry.Y-20,400]});e.push(i);new oe.a({color:[255,255,255],intensity:2,position:[t.geometry.X-20,t.geometry.Y+20,400]});e.push(5)}}catch(o){}})),[new se.a(e)]}},{key:"_renderLayers",value:function(){var e=this,t=[],a={ambient:1,diffuse:.2,shininess:0};return""!=this.props.store.assets.toString()&&this.props.store.assets!=[]&&this.props.store.assets.map((function(r){if(r){console.log(r.geometry.ModelName,r.Equipement,r.AssetId);try{var n=new te.a({id:"models_".concat(r.AssetId),data:[{position:[r.geometry.X,r.geometry.Y,r.geometry.Z],zoom:18,orientation:[r.geometry.RotationX,r.geometry.RotationY,r.geometry.RotationZ],model:r}],mesh:"models/"+r.geometry.ModelName+".obj",material:a,sizeScale:r.geometry.Scale,visible:!!e.state.showModels,coordinateSystem:re.a.LNGLAT,getPosition:function(e){return e.position},getOrientation:function(e){return e.orientation},pickable:!0,onClick:function(t){e.props.store.setDataPanelModel(t.object.model)}});t.push(n)}catch(i){}}})),Object(N.p)(this.props.store.subNetConectivity).map((function(a,r){var n=new ae.a({id:"".concat(r,"-subnet-connectivity"),data:a,pickable:!1,visible:!!e.state.showConnectivity,widthMinPixels:2,opacity:.6,getPath:function(e){return e},positionFormat:"XYZ",getColor:[253,128,93],getWidth:function(e){return 1}});t.push(n)})),Object(N.p)(this.props.store.stagedConnectivityData).map((function(a,r){var n=new ae.a({id:"".concat(r,"-subnet-connectivity-staged"),data:a,pickable:!1,visible:!!e.state.showConnectivity,widthMinPixels:2,opacity:.76,getPath:function(e){return e},positionFormat:"XYZ",getColor:[246,0,0],getWidth:function(e){return 1},getDashArray:[2,3],dashJustified:!0,extensions:[new ce.a({dash:!0})]});t.push(n)})),[t]}},{key:"render",value:function(){var e=this;return O.a.createElement("div",{className:"mapContainer"},O.a.createElement(le.a,{initialViewState:this.props.store.mapViewPort,controller:!0,onViewStateChange:function(t){var a=t.viewState;return e.props.store.updateMapViewport(a)},effects:this._renderEffects(),layers:this._renderLayers()},O.a.createElement(ne.a,{id:"mapView",controller:!0},O.a.createElement(V.c,{mapboxApiAccessToken:"pk.eyJ1IjoiamF5bG9ob2thcmUiLCJhIjoiY2tkcnI4OHU3MGZ6NDJ0bHFsOHRrcTljeiJ9.D9GoLNq2BgK16q5w3TjJ1g",mapStyle:this.state.mapStyle})),O.a.createElement(ge,{setMapStyle:this._onStyleChange,additionalLayers:this.state.layersList,toggleParent:this.layerCheck})),O.a.createElement(ve,{refreshClick:this.refreshAssets}),O.a.createElement(we,null),O.a.createElement(Se,{toggleStreetView:this.toggleStreetView}),O.a.createElement(K,null))}}]),a}(S.Component),Ee=Object(k.b)("store")(Object(k.c)(Oe)),je=function(e){Object(P.a)(a,e);var t=Object(M.a)(a);function a(){var e;Object(x.a)(this,a);for(var r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];return(e=t.call.apply(t,[this].concat(n))).withDataState=function(e){return O.a.createElement("div",null,O.a.createElement("button",{style:{border:"none",backgroundColor:"transparent"},"data-target":"slide-out",className:"sidenav-trigger mobileMenu"},O.a.createElement("i",{className:"material-icons black-text menu-icon"},"menu")),O.a.createElement("ul",{id:"slide-out",className:"sidenav sidenav-fixed grey lighten-3"},e),O.a.createElement(Ee,null))},e.loadingState=function(){return O.a.createElement(U,null)},e.errorState=function(){return O.a.createElement(z,null)},e.loadedState=function(){return O.a.createElement(W,null)},e}return Object(R.a)(a,[{key:"componentDidUpdate",value:function(){var e=document.querySelectorAll(".sidenav");$.a.Sidenav.init(e,null)}},{key:"componentDidMount",value:function(){var e=Object(C.a)(D.a.mark((function e(){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{this.props.store.initiateMap()}catch(t){console.log(t)}case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.props.store,t=e.assetsLoadingState;return!1===e.errorState?!1===t?this.withDataState(this.loadedState()):this.withDataState(this.loadingState()):this.withDataState(this.errorState())}}]),a}(S.Component),ke=Object(k.b)("store")(Object(k.c)(je)),Le=function(e){Object(P.a)(a,e);var t=Object(M.a)(a);function a(e){var r;return Object(x.a)(this,a),(r=t.call(this,e)).state={hasError:!1},r}return Object(R.a)(a,[{key:"componentDidCatch",value:function(e,t){console.log(e,t)}},{key:"render",value:function(){return this.state.hasError?O.a.createElement("h1",null,"Something went wrong."):this.props.children}}],[{key:"getDerivedStateFromError",value:function(e){return{hasError:!0}}}]),a}(O.a.Component),_e=new Z;j.a.render(O.a.createElement(k.a,{store:_e},O.a.createElement(Le,null,O.a.createElement(ke,null))),document.getElementById("root"))}},[[163,1,2]]]);
//# sourceMappingURL=main.de9dd0e6.chunk.js.map